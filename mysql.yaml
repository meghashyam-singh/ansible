---
- name: mysql database setup
  hosts: mysql
  become: yes

  tasks:
   - name: installing mmysql server
     ansible.builtin.package:
       name: mysql-server
       state: present

   - name: start and enable mysql server
     ansible.builtin.service:
       name: mysqld
       state: started
       enabled: yes

   - name: set root password
     ansible.builtin.shell: mysql_secure_installation -set-root-pass RoboShop@1

   - name: check port
     ansible.builtin.command: netstat -lntp
     register: sqlport

   - name: print mysql port
     ansible.builtin.debug:
       msg: "{{ sql }}""